---
import DateTime from '../../components/DateTime.astro';
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

// Maybe there's a better way in Astro to sort the posts by date?
const frontPagePosts = (await getCollection('blog')).sort(
  (post1, post2) => Date.parse(post2.data.date) - Date.parse(post1.data.date)
);
---

<Layout title="Posts Archive">
  <section class="post-list pad-top-700 gap-bottom-900">
    <div class="inner-wrapper sf-flow">
      <h2 class="post-list__heading text-700 md:text-800">All posts</h2>
      <ol class="post-list__items sf-flow pad-top-300" reversed>
        {
          frontPagePosts.map((item) => {
            return (
              <li class="post-list__item">
                <h3 class="font-base leading-tight text-600 weight-mid">
                  <a
                    href={`/blog/${item.slug}`}
                    class="post-list__link"
                    rel="bookmark"
                  >
                    {item.data.title}
                  </a>
                </h3>
                <p class="text-500 gap-top-300 weight-mid">
                  <DateTime date={new Date(item.data.date)} />
                </p>
              </li>
            );
          })
        }
      </ol>
    </div>
  </section>
</Layout>
